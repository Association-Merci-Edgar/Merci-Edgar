li_task = $('#task_<%= @task.id %>');
if (li_task.parent().is("strike")) {
	li_task.unwrap("<strike></strike>");	
}
else {
	li_task.wrap("<strike></strike>");
	setTimeout("uncomplete(li_task)",5000);
}


function uncomplete(li_task) {
	checkbox = li_task.find("input");
	if (checkbox.is(':checked') == false) {
		li_task.fadeOut(1500, function() { clean_and_refresh_uncompleted_tasks(li_task)  });
	}
}

function clean_and_refresh_uncompleted_tasks(li_task) {
	li_task.remove();
	pending_tasks = $('#pending_tasks');
	if (pending_tasks.length > 0) {
		pending_tasks.replaceWith("<%= j render(partial:'pending', locals: {tasks: @task.asset.tasks.pending}) %>")
	}
		
}


