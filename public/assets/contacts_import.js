function pollJobidStatus(){var e,t,s,o;e=$("#progress_import"),t=e.parent(),json_path=e.data("url"),s=e.find(".bar"),o=$("#log_import"),$.getJSON(json_path,function(e){return"working"==e.status&&(s.width(e.pct+1+"%"),null!=e.message&&(o.empty(),o.append(e.message.replace(/\n/g,"<br />")))),"complete"==e.status?null!=e.result.invalid_file?(showNoticeError(e.result.message,"",!0),!1):(null!=e.result.message&&(o.empty(),o.append(e.result.message.replace(/\n/g,"<br />"))),nb_imported_contacts=e.result.nb_imported_contacts,nb_duplicates=e.result.nb_duplicates,showNoticeSuccessSection("toto.csv",nb_imported_contacts,"toto"),!1):"failed"==e.status?(showNoticeError("Une erreur interne est survenue",e.message,!1),!1):void setTimeout(pollJobidStatus,1e3)})}function showNoticeError(e,t,s){$("#progress_section").hide(),s&&$("#log_import").hide(),$("#short_message").text(e),$("#exception_message").text(t),$("#notice_error").show()}function showNoticeSuccessSection(e,t){progressSection=$("#progress_section"),noticeSuccessSection=$("#notice_success"),nbImportedContactsSpan=$("#notice_success #nb_imported_contacts"),nbImportedContactsSpan.text(t),progressSection.fadeOut(),noticeSuccessSection.fadeIn()}$("#contact-file-type input.radio_buttons").on("click",function(){$(this).closest("span").hasClass("xml")?(console.log("xml"),$("#first_name_last_name").slideUp(200)):$("#first_name_last_name").slideDown(200)}),pollJobidStatus();