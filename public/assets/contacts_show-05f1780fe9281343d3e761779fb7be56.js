function displayMap(){mapElement=$("#map"),mapElement.length>0&&(data1=mapElement.data(),options={address:data1.address},geocodedPrecisely=data1.geocodedPrecisely,!geocodedPrecisely&&data1.address?jQuery.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?"+jQuery.param(options)+"&sensor=false",type:"GET",success:function(a){result=parseGeocodeResult(a.results[0]),address_options={latitude:result.lat,longitude:result.lng,admin_name1:result.administrative_area_level_1,admin_name2:result.administrative_area_level_2},console.log("parsing: "+JSON.stringify(address_options)),mapElement.data("geocodedPrecisely",!0),jQuery.ajax({url:data1.path+"?"+jQuery.param(address_options),type:"PUT"}),loadMap(mapElement[0],result.lat,result.lng)}}):!mapAlreadyLoaded&&data1.latitude&&data1.longitude&&loadMap(mapElement[0],data1.latitude,data1.longitude))}function parseGeocodeResult(a){var e={lat:a.geometry.location.lat,lng:a.geometry.location.lng};_addressParts={administrative_area_level_1:null,administrative_area_level_2:null};for(var t in _addressParts)e[t]=findInfo(a,t);return e.type=a.types[0],e}function findInfo(a,e){for(var t=0;t<a.address_components.length;t++){var n=a.address_components[t];if(-1!=n.types.indexOf(e))return n.long_name}return!1}function loadMap(a,e,t){latlng=new google.maps.LatLng(e,t),mapOptions={center:latlng,zoom:6},map=new google.maps.Map(a,mapOptions),marker=new google.maps.Marker({position:latlng,map:map}),mapAlreadyLoaded=!0}var mapAlreadyLoaded=!1;$('a[data-toggle="tab"]').on("shown",function(a){null!=a.target.toString().match("#infos")&&displayMap()}),$(function(){displayMap()});